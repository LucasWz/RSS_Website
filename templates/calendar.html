<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="//d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.min.js"></script>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.css" />
  </head>
  <body>
    <div id="cal-heatmap"></div>
    <button id="previous" style="margin-bottom: 10px" class="btn">
      <i class="icon icon-chevron-left"></i>
    </button>
    <button id="next" style="margin-bottom: 10px" class="btn">
      <i class="icon icon-chevron-left"></i>
    </button>
    <script type="text/javascript">
      (function () {
        var cal = new CalHeatMap();
        cal.init({
          itemSelector: '#cal-heatmap',
          domain: 'month',
          subDomain: 'x_day',
          data: '{{ data|safe }}',
          start: new Date(2000, 0, 5),
          cellSize: 20,
          cellPadding: 5,
          domainGutter: 20,
          range: 2,
          domainDynamicDimension: false,
          previousSelector: '#previous',
          nextSelector: '#next',
          domainLabelFormat: function (date) {
            moment.lang('en');
            return moment(date).format('MMMM').toUpperCase();
          },
          subDomainTextFormat: '%d',
          legend: [20, 40, 60, 80],
        });
    </script>
  </body>
</html>